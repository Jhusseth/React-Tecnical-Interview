"use strict";(self.webpackChunkreact_tecnical_interview=self.webpackChunkreact_tecnical_interview||[]).push([[379],{379:function(e,t,s){s.r(t),s.d(t,{default:function(){return U}});var r=s(5861),n=s(885),a=s(7757),i=s.n(a),c=s(2791),l=s(7432),d=s(7762),o=s(235),u=s(5405),m=s(2506),x=s(6973),h=s(8941),p=s(7698),f=s(3235),j=s(1724),v=s(4483),b=s(3174),N=s(9062),g=s(3374),w=s(184);function y(e){var t=j.Ry().shape({name:j.Z_().required("Product name is required"),price:j.Z_().required("Product price is required"),description:j.Z_().required("Product description is required")}),s=(0,c.useState)(),a=(0,n.Z)(s,2),y=a[0],Z=a[1],k=(0,c.useState)(),S=(0,n.Z)(k,2),P=S[0],C=S[1],D=(0,c.useState)([]),_=(0,n.Z)(D,2),q=_[0],F=_[1],L=(0,c.useState)(!1),M=(0,n.Z)(L,2),E=M[0],R=M[1],J=(0,c.useState)(!0),T=(0,n.Z)(J,2),U=T[0],I=T[1],A=function(){var e=(0,r.Z)(i().mark((function e(t){var s,r,n,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=t.target.files).length<=3)){e.next=23;break}r=[],n=(0,d.Z)(s),e.prev=4,c=i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.value,s={name:"",base64:""},e.next=4,G(t).then((function(e){t.base64=e,s.name=t.name,s.base64=t.base64})).catch((function(e){console.log(e)}));case 4:r.push(s);case 5:case"end":return e.stop()}}),e)})),n.s();case 7:if((a=n.n()).done){e.next=11;break}return e.delegateYield(c(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:r.length>=3?I(!1):I(!0),F(r),e.next=24;break;case 23:alert("Maximo 3 imagenes");case 24:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),G=function(e){return new Promise((function(t){var s="",r=new FileReader;r.readAsDataURL(e),r.onload=function(){s=r.result,t(s)}}))},z=function(){var t=(0,r.Z)(i().mark((function t(s){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.images=q,!(s.images.length>0)){t.next=17;break}return t.prev=2,R(!0),t.next=6,(0,N.ET)((0,N.hJ)(g.db,"products"),{name:s.name,description:s.description,price:s.price,images:s.images,created:N.EK.now()});case 6:Z("Producto agregado con exito"),C(""),setTimeout((function(){e.showPanel(),window.location.reload()}),1e3),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),R(!1),C("Error al agregar producto");case 15:t.next=19;break;case 17:C("Error al agregar producto, debe contener al menos 1 imagen"),Z("");case 19:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("section",{className:"w-4/5 h-screen m-auto sm:pt-10",children:[(0,w.jsx)(o.Z,{}),(0,w.jsx)(u.Z,{children:(0,w.jsx)("div",{className:"flex items-center justify-center py-7 px-2 sm:px-3 lg:px-3",children:(0,w.jsx)("div",{className:"max-w-md w-full flex items-center justify-center",children:(0,w.jsx)(m.J9,{initialValues:{name:"",price:"",description:"",images:[]},onSubmit:function(e){return z(e)},validationSchema:t,children:function(){return(0,w.jsxs)(m.l0,{className:"mt-8",children:[y&&(0,w.jsx)(x.Z,{text:y}),P&&(0,w.jsx)(h.Z,{text:P}),(0,w.jsx)("input",{type:"hidden",name:"remember",value:"true"}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsxs)("div",{className:"mb-2 mr-2 w-1/2",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Name"})}),(0,w.jsx)(p.Z,{ariaLabel:"Name",name:"name",type:"text",placeholder:"Name"})]}),(0,w.jsxs)("div",{className:"mb-2 mr-2 w-1/2",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Price"})}),(0,w.jsx)(p.Z,{ariaLabel:"Price",name:"price",type:"number",placeholder:"0.00"})]})]}),(0,w.jsx)("div",{className:"flex",children:(0,w.jsxs)("div",{className:"mb-2 mr-2 w-full",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Upload images"})}),(0,w.jsx)("div",{className:"grid grid-cols-3 justify-center mt-5 mb-5",children:q.length>0&&q.map((function(e,t){return(0,w.jsx)("div",{className:"justify-around",children:(0,w.jsxs)("div",{className:"flex-column",children:[(0,w.jsx)("img",{src:e.base64,alt:"...",className:"w-32 h-24"}),(0,w.jsx)("label",{className:"dark:text-gray-300",children:e.name})]})},t)}))}),3===q.length&&(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"rounded-full shadow hover:text-yellow-500 dark:text-yellow-500 dark:hover:text-amber-600 flex items-center px-3 py-3",onClick:function(){return F([]),void I(!0)},children:(0,w.jsx)(v.G,{icon:b.I7k})})}),U&&(0,w.jsx)("div",{className:"form-group",children:(0,w.jsx)("input",{type:"file",className:"form-control dark:text-gray-300",onChange:A,multiple:!0})})]})}),(0,w.jsx)("div",{className:"flex",children:(0,w.jsxs)("div",{className:"mb-2 mr-2 w-full",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Description"})}),(0,w.jsx)(p.Z,{ariaLabel:"Description",name:"description",type:"text",placeholder:"Description"})]})})]}),(0,w.jsx)("div",{className:"mt-6 flex items-center justify-center",children:(0,w.jsx)(l.Z,{type:"submit",text:"Save",loading:E})})]})}})})})})]})})}var Z=function(e){var t=e.title;return(0,w.jsx)("div",{className:"my-1 sm:my-4",children:(0,w.jsx)("h2",{className:"text-gray-800 font-bold text-2xl dark:text-gray-200",children:t})})},k=function(e){var t=e.children;return(0,w.jsx)("div",{className:"mb-3 w-full",children:t})};function S(e){var t=e.text,s=e.close;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"text-white px-6 py-4 border-0 rounded relative mb-4 bg-teal-500",children:[(0,w.jsx)("span",{className:"text-xl inline-block mr-5 align-middle",children:(0,w.jsx)("i",{className:"fas fa-bell"})}),(0,w.jsx)("span",{className:"inline-block align-middle mr-8",children:(0,w.jsx)("b",{className:"capitalize",children:t})}),(0,w.jsx)("button",{className:"absolute bg-transparent text-2xl font-semibold leading-none right-0 top-0 mt-4 mr-6 outline-none focus:outline-none",onClick:s,children:(0,w.jsx)("span",{children:"\xd7"})})]})})}var P=s(2649);function C(e){var t=j.Ry().shape({name:j.Z_().required("Product name is required"),price:j.Z_().required("Product price is required"),description:j.Z_().required("Product description is required")}),s=(0,c.useState)(),a=(0,n.Z)(s,2),v=a[0],b=a[1],y=(0,c.useState)(),Z=(0,n.Z)(y,2),k=Z[0],S=Z[1],C=(0,c.useState)([]),D=(0,n.Z)(C,2),_=D[0],q=D[1],F=(0,c.useState)(!1),L=(0,n.Z)(F,2),M=L[0],E=L[1],R=function(){var e=(0,r.Z)(i().mark((function e(t){var s,r,n,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=t.target.files).length<=3)){e.next=22;break}r=[],n=(0,d.Z)(s),e.prev=4,c=i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.value,s={name:"",base64:""},e.next=4,J(t).then((function(e){t.base64=e,s.name=t.name,s.base64=t.base64})).catch((function(e){console.log(e)}));case 4:r.push(s);case 5:case"end":return e.stop()}}),e)})),n.s();case 7:if((a=n.n()).done){e.next=11;break}return e.delegateYield(c(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:q(r),e.next=23;break;case 22:alert("Maximo 3 imagenes");case 23:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e){return new Promise((function(t){var s="",r=new FileReader;r.readAsDataURL(e),r.onload=function(){s=r.result,t(s)}}))},T=function(){var t=(0,r.Z)(i().mark((function t(s){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(!0),r=(0,N.JU)(g.db,"products",e.id),t.next=5,(0,N.r7)(r,{name:s.name,description:s.description,price:s.price,images:s.images});case 5:b("Se edit\xf3 el producto correctamente"),S(""),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),console.lopg(t.t0),E(!1),S("No se pudo editar el producto"),b("");case 15:return t.prev=15,setTimeout((function(){e.setShowModal(!1),window.location.reload()}),1e3),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,9,15,18]])})));return function(e){return t.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:e.showModal?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("section",{className:"w-3/4 h-screen m-auto sm:pt-10",children:[(0,w.jsx)(o.Z,{}),(0,w.jsx)(u.Z,{children:(0,w.jsx)("div",{className:"flex items-center justify-center py-7 px-2 sm:px-3 lg:px-3",children:(0,w.jsx)("div",{className:"max-w-md w-full flex items-center justify-center",children:(0,w.jsx)(m.J9,{initialValues:{name:e.product.name,price:e.product.price,description:e.product.description,images:e.product.images},onSubmit:function(e){return T(e)},validationSchema:t,children:function(t){t.values;return(0,w.jsxs)(m.l0,{className:"mt-8",children:[v&&(0,w.jsx)(x.Z,{text:v}),k&&(0,w.jsx)(h.Z,{text:k}),(0,w.jsx)("input",{type:"hidden",name:"remember",value:"true"}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsxs)("div",{className:"mb-2 mr-2 w-1/2",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Name"})}),(0,w.jsx)(p.Z,{ariaLabel:"Name",name:"name",type:"text",placeholder:"Name"})]}),(0,w.jsxs)("div",{className:"mb-2 mr-2 w-1/2",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Price"})}),(0,w.jsx)(p.Z,{ariaLabel:"Price",name:"price",type:"number",placeholder:"0.00"})]})]}),(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("div",{className:"mb-2 mr-2 w-full",children:(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Upload images"})})}),0===_.length?(0,w.jsx)("div",{className:"grid grid-cols-3 justify-center mt-3 mb-3",children:e.product.images.length>0&&e.product.images.map((function(e,t){return(0,w.jsx)("div",{className:"justify-around",children:(0,w.jsxs)("div",{className:"flex-column",children:[(0,w.jsx)("img",{src:e.base64,alt:"...",className:"w-32 h-24"}),(0,w.jsx)("label",{className:"dark:text-gray-300",children:e.name})]})},t)}))}):(0,w.jsx)("div",{className:"grid grid-cols-3 justify-center mt-3 mb-3",children:_.map((function(e,t){return(0,w.jsx)("div",{className:"justify-around",children:(0,w.jsxs)("div",{className:"flex-column",children:[(0,w.jsx)("img",{src:e.base64,alt:"...",className:"w-32 h-24 dark:text-gray-300"}),(0,w.jsx)("label",{className:"dark:text-gray-300",children:e.name})]})},t)}))}),(0,w.jsx)("div",{className:"form-group",children:(0,w.jsx)("input",{type:"file",className:"form-control dark:text-gray-300",onChange:R,multiple:!0})})]}),(0,w.jsx)("div",{className:"flex",children:(0,w.jsxs)("div",{className:"mb-2 mr-2 w-full",children:[(0,w.jsx)("div",{className:"mb-1",children:(0,w.jsx)(f.Z,{text:"Description"})}),(0,w.jsx)(p.Z,{ariaLabel:"Description",name:"description",type:"text",placeholder:"Description"})]})})]}),(0,w.jsxs)("div",{className:"mt-6 flex items-center justify-center",children:[(0,w.jsx)(l.Z,{type:"submit",text:"Save",loading:M}),(0,w.jsx)("div",{className:"ml-6",children:(0,w.jsx)(P.Z,{to:"/products2",text:"Exit"})})]})]})}})})})})]})}):null})}var D=s(5671),_=s(3144),q=s(136),F=s(3668),L=s(8820),M=s(5540),E=s.n(M),R=function(e){(0,q.Z)(s,e);var t=(0,F.Z)(s);function s(e){var r;return(0,D.Z)(this,s),(r=t.call(this,e)).nextSlide=function(){var e=r.state.currentSlide===r.state.carouselData.length-1?0:r.state.currentSlide+1;r.setState({currentSlide:e})},r.prevSlide=function(){var e=0===r.state.currentSlide?r.state.carouselData.length-1:r.state.currentSlide-1;r.setState({currentSlide:e})},r.setCurrentSlide=function(e){r.setState({currentSlide:e})},console.log(e),r.state={currentSlide:0,paused:!1,carouselData:e.images},r}return(0,_.Z)(s,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){if(!1===e.state.paused){var t=e.state.currentSlide===e.state.carouselData.length-1?0:e.state.currentSlide+1;e.setState({currentSlide:t})}}),3e3)}},{key:"render",value:function(){var e=this;return(0,w.jsx)("div",{className:"mt-5",children:(0,w.jsxs)("div",{className:"max-w-lg h-48 flex overflow-hidden relative",children:[(0,w.jsx)(L.CF5,{onClick:this.prevSlide,className:"absolute left-0 text-3xl inset-y-1/2 text-white cursor-pointer"}),(0,w.jsx)(E(),{onSwipeLeft:this.nextSlide,onSwipeRight:this.prevSlide,children:this.state.carouselData.map((function(t,s){return(0,w.jsx)("img",{src:t.base64,alt:"This is a carousel slide",className:s===e.state.currentSlide?"block w-full h-56 object-cover":"hidden",onMouseEnter:function(){e.setState({paused:!0})},onMouseLeave:function(){e.setState({paused:!1})}},s)}))}),(0,w.jsx)("div",{className:"absolute w-full flex justify-center bottom-0",children:this.state.carouselData.map((function(t,s){return(0,w.jsx)("div",{className:s===e.state.currentSlide?"h-2 w-2 bg-blue-700 rounded-full mx-2 mb-2 cursor-pointer":"h-2 w-2 bg-white rounded-full mx-2 mb-2 cursor-pointer",onClick:function(){e.setCurrentSlide(s)}},s)}))}),(0,w.jsx)(L.Td4,{onClick:this.nextSlide,className:"absolute right-0 text-3xl inset-y-1/2 text-white cursor-pointer"})]})})}}]),s}(c.Component);function J(e){var t=(0,c.useState)(),s=(0,n.Z)(t,2),a=s[0],l=s[1],d=(0,c.useState)(!1),m=(0,n.Z)(d,2),x=m[0],h=m[1],p=(0,c.useState)(!1),j=(0,n.Z)(p,2),y=j[0],Z=j[1],P=(0,c.useState)(),D=(0,n.Z)(P,2),_=D[0],q=D[1],F=function(){var e=(0,r.Z)(i().mark((function e(t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=(0,N.JU)(g.db,"products",t),e.next=4,(0,N.oe)(s);case 4:l("Se elimin\xf3 el producto correctamente"),h(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),l("No se pudo eliminar el producto"),h(!0);case 12:setTimeout((function(){window.location.reload()}),500);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:y?(0,w.jsx)(C,{setShowModal:Z,product:_,id:e.pd_id,showModal:y}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{}),(0,w.jsxs)(u.Z,{children:[x?(0,w.jsx)(S,{text:a,close:function(){h(!1)}}):null,(0,w.jsxs)("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:[(0,w.jsx)("div",{className:"flex",children:(0,w.jsxs)("div",{className:"md:grid md:grid-cols-2 sm:flex sm:flex-col",children:[(0,w.jsxs)("div",{className:"flex flex-col min-w-full",children:[(0,w.jsxs)("div",{className:"grid grid-cols-2",children:[(0,w.jsx)("div",{className:"w-32 mt-5",children:(0,w.jsx)(k,{children:(0,w.jsxs)("div",{className:" justify-center flex-col ml-5 mt-3",children:[(0,w.jsx)(f.Z,{text:"Name: "}),(0,w.jsx)("br",{}),(0,w.jsx)(f.Z,{text:"Price: "}),(0,w.jsx)("br",{})]})})}),(0,w.jsx)("div",{className:" w-32 mt-5",children:(0,w.jsx)(k,{children:(0,w.jsxs)("div",{className:" justify-center flex-col mt-3",children:[(0,w.jsxs)("label",{className:"text-sm font-bold font-semibold text-app overflow-hidden dark:text-gray-200",children:[" ",e.pd.name," "]}),(0,w.jsx)("br",{}),(0,w.jsxs)("label",{className:"text-sm font-bold font-semibold text-app overflow-hidden dark:text-gray-200",children:[" ",e.pd.price," "]}),(0,w.jsx)("br",{})]})})})]}),(0,w.jsxs)("div",{className:"w-64",children:[(0,w.jsx)("div",{className:"items-center text-center",children:(0,w.jsxs)(k,{children:[(0,w.jsx)(f.Z,{text:"Description: "}),(0,w.jsx)("br",{})]})}),(0,w.jsx)("div",{className:" justify-center text-center",children:(0,w.jsxs)(k,{children:[(0,w.jsxs)("label",{className:"text-sm font-bold font-semibold text-app overflow-hidden dark:text-gray-200",children:[" ",e.pd.description]}),(0,w.jsx)("br",{})]})})]})]}),(0,w.jsx)("div",{className:"flex flex-row justify-center items-center text-center",children:(0,w.jsx)("div",{className:"justify-center items-center text-center",children:(0,w.jsx)(R,{images:e.pd.images})})})]})}),(0,w.jsxs)("div",{className:"flex justify-evenly mt-3 mb-2",children:[(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"flex rounded-full items-center py-2 px-6 bg-gradient focus:outline-none shadow-lg text-white",onClick:function(){return t=e.pd,q(t),void Z(!0);var t},children:(0,w.jsx)(v.G,{icon:b.Xcf})})}),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"flex rounded-full items-center py-2 px-6 bg-gradient focus:outline-none shadow-lg text-white",onClick:function(){return F(e.pd_id)},children:(0,w.jsx)(v.G,{icon:b.I7k})})})]})]})]})]})})}var T=s(6910);function U(){var e=(0,c.useState)(!1),t=(0,n.Z)(e,2),s=t[0],a=t[1],d=(0,c.useState)([]),o=(0,n.Z)(d,2),u=o[0],m=o[1],x=(0,T.F_)(g.I8),h=(0,n.Z)(x,2),p=h[0],f=h[1],j=function(){var e=(0,r.Z)(i().mark((function e(){var t,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,N.IO)((0,N.hJ)(g.db,"products")),e.next=4,(0,N.PL)(t);case 4:s=e.sent,r=s.docs,m(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert("error en la carga de los productos");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){j()}),[p,f]);var v=function(){a(!s)};return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"container mx-auto px-4 dark:bg-zinc-900",children:[(0,w.jsx)(Z,{title:"Productos"}),(0,w.jsxs)("div",{className:"py-1",children:[(0,w.jsxs)("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto",children:[(0,w.jsx)("div",{className:"container-add",children:(0,w.jsx)(l.Z,{text:"A\xf1adir + ",onClick:v})}),(0,w.jsx)("div",{style:{display:"".concat(s?"block":"none")},children:(0,w.jsx)(y,{showPanel:v})})]}),(0,w.jsx)("div",{className:"md:grid md:grid-cols-2 md:gap-5 sm:flex sm:flex-col xs:flex xs:flex-col",children:u.map((function(e,t){return(0,w.jsx)("div",{className:"md:mb-1 sm:mb-3 xs:mb-4",children:(0,w.jsx)("div",{className:"md:min-w-full sm:w-full",children:(0,w.jsx)(J,{pd_id:e.id,pd:e.data()})})},t)}))})]})]})})}}}]);
//# sourceMappingURL=379.d462d68f.chunk.js.map